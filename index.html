<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="docs/assets/css/estilos.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" />
    <title>Reto 10 Softparty</title>
</head>

<body>
    <div class="content-form">
        <div class="formulario column">
            <h1>Formulario de Registro</h1>
            <form action="#" method="post" id="registroForm">
                <div class="campo-form">
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" placeholder="Nombre" required />
                </div>
                <div class="campo-form">
                    <label for="apellido">Apellido:</label>
                    <input type="text" id="apellido" name="apellido" placeholder="Apellido" required />
                </div>
                <div class="campo-form">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" placeholder="Correo Electrónico" required />
                </div>
                <button class="btn-enviar" type="submit">Enviar</button>
            </form>
        </div>
        <div class="apartado column" style="background-color: #0f2cf959; display: flex; align-items: center; justify-content: center;">
            <img src="docs/assets/img/desarrollador.svg" alt="Desarrollador" style="max-width: 80%; height: auto; display: block;" />
        </div>
    </div>

    <div class="tabla-resultados">
        <h2 class="text-center">Usuarios registrados</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Nombre</th>
                    <th scope="col">Apellido</th>
                    <th scope="col">Correo Electrónico</th>
                </tr>
            </thead>
            <tbody id="tabla-body">
                <tr>
                    <td colspan="3" class="text-muted text-center">Aún no hay registros</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const form = document.getElementById("registroForm");
            const tbody = document.getElementById("tabla-body");

            form.addEventListener("submit", (e) => {
                e.preventDefault();

                const nombre = form.nombre.value.trim();
                const apellido = form.apellido.value.trim();
                const email = form.email.value.trim();

                if (!nombre || !apellido || !email) {
                    Swal.fire({
                        icon: "warning",
                        title: "Campos incompletos",
                        text: "Por favor completa todos los campos.",
                        confirmButtonText: "Entendido",
                    });
                    return;
                }

                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    Swal.fire({
                        icon: "error",
                        title: "Correo no válido",
                        text: "Revisa el formato del correo electrónico.",
                        confirmButtonText: "Ok",
                    });
                    return;
                }

        // Eliminar mensaje de "Aún no hay registros"
                if (tbody.children.length === 1 && tbody.children[0].children.length === 1) {
                    tbody.innerHTML = "";
                }

                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${nombre}</td>
                    <td>${apellido}</td>
                    <td>${email}</td>
                `;
                tbody.appendChild(tr);

                form.reset();
                form.nombre.focus();

                Swal.fire({
                    icon: "success",
                    title: "¡Registro exitoso!",
                    text: `${nombre} ${apellido} fue registrado correctamente.`,
                    confirmButtonText: "Aceptar",
                    timer: 1800,
                    timerProgressBar: true,
                });
            });
        });
    </script>
</body>

</html>